$(function() {
  var navigateToRegions = function() {
    App.instance.navigate('/regions')
  };

  App.World.bind('loaded', function() {
    var gui = new dat.GUI({autoPlace: false});
    gui.closed = true;

    var options = { "See Regions": navigateToRegions };

    gui.add(options, "See Regions");
    var debugController = gui.add(Env, "debug");
    debugController.onChange(function(value) {
      if(!value) {
        $(".debug").fadeOut();
      } else {
        $(".debug").fadeIn();
      }
    });

    var wireframeController = gui.add(Env, "wireframe");
    wireframeController.onChange(function(value) {
      getHook().reloadRegions();
    });

    gui.add(Env, "boroughs");
    gui.add(Env, "neighborhoods");
    gui.add(Env, "buildings");
    gui.add(Env, "blocks");

    var customContainer = $('#datgui');
    customContainer.append(gui.domElement);

    <% if Rails.env.production? %>
        <%= "gui.domElement.hidden = true;" %>
    <% end %>
  });
});
